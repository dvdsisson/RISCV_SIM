`timescale 1ns / 1ps

module immediatevaluebuilder(
    input [31:0] IR,
    input [2:0] IVBits,
    output [31:0] IV
    );
wire [31:0] IType, SType, BType, UType, JType, firstintermediate, secondintermediate; 
wire [1:0] firstselect;
wire secondselect, thirdselect;

assign IType[31] = IR[31];
assign IType[30] = IR[31];
assign IType[29] = IR[31];
assign IType[28] = IR[31];
assign IType[27] = IR[31];
assign IType[26] = IR[31];
assign IType[25] = IR[31];
assign IType[24] = IR[31];
assign IType[23] = IR[31];
assign IType[22] = IR[31];
assign IType[21] = IR[31];
assign IType[20] = IR[31];
assign IType[19] = IR[31];
assign IType[18] = IR[31];
assign IType[17] = IR[31];
assign IType[16] = IR[31];
assign IType[15] = IR[31];
assign IType[14] = IR[31];
assign IType[13] = IR[31];
assign IType[12] = IR[31];
assign IType[11] = IR[31];
assign IType[10] = IR[30];
assign IType[9] = IR[29];
assign IType[8] = IR[28];
assign IType[7] = IR[27];
assign IType[6] = IR[26];
assign IType[5] = IR[25];
assign IType[4] = IR[24];
assign IType[3] = IR[23];
assign IType[2] = IR[22];
assign IType[1] = IR[21];
assign IType[0] = IR[20];

assign SType[31] = IR[31];
assign SType[30] = IR[31];
assign SType[29] = IR[31];
assign SType[28] = IR[31];
assign SType[27] = IR[31];
assign SType[26] = IR[31];
assign SType[25] = IR[31];
assign SType[24] = IR[31];
assign SType[23] = IR[31];
assign SType[22] = IR[31];
assign SType[21] = IR[31];
assign SType[20] = IR[31];
assign SType[19] = IR[31];
assign SType[18] = IR[31];
assign SType[17] = IR[31];
assign SType[16] = IR[31];
assign SType[15] = IR[31];
assign SType[14] = IR[31];
assign SType[13] = IR[31];
assign SType[12] = IR[31];
assign SType[11] = IR[31];
assign SType[10] = IR[30];
assign SType[9] = IR[29];
assign SType[8] = IR[28];
assign SType[7] = IR[27];
assign SType[6] = IR[26];
assign SType[5] = IR[25];
assign SType[4] = IR[11];
assign SType[3] = IR[10];
assign SType[2] = IR[9];
assign SType[1] = IR[8];
assign SType[0] = IR[7];

assign BType[31] = IR[31];
assign BType[30] = IR[31];
assign BType[29] = IR[31];
assign BType[28] = IR[31];
assign BType[27] = IR[31];
assign BType[26] = IR[31];
assign BType[25] = IR[31];
assign BType[24] = IR[31];
assign BType[23] = IR[31];
assign BType[22] = IR[31];
assign BType[21] = IR[31];
assign BType[20] = IR[31];
assign BType[19] = IR[31];
assign BType[18] = IR[31];
assign BType[17] = IR[31];
assign BType[16] = IR[31];
assign BType[15] = IR[31];
assign BType[14] = IR[31];
assign BType[13] = IR[31];
assign BType[12] = IR[31];
assign BType[11] = IR[7];
assign BType[10] = IR[30];
assign BType[9] = IR[29];
assign BType[8] = IR[28];
assign BType[7] = IR[27];
assign BType[6] = IR[26];
assign BType[5] = IR[25];
assign BType[4] = IR[11];
assign BType[3] = IR[10];
assign BType[2] = IR[9];
assign BType[1] = IR[8];
assign BType[0] = 1'b0;

assign UType[31] = IR[31];
assign UType[30] = IR[30];
assign UType[29] = IR[29];
assign UType[28] = IR[28];
assign UType[27] = IR[27];
assign UType[26] = IR[26];
assign UType[25] = IR[25];
assign UType[24] = IR[24];
assign UType[23] = IR[23];
assign UType[22] = IR[22];
assign UType[21] = IR[21];
assign UType[20] = IR[20];
assign UType[19] = IR[19];
assign UType[18] = IR[18];
assign UType[17] = IR[17];
assign UType[16] = IR[16];
assign UType[15] = IR[15];
assign UType[14] = IR[14];
assign UType[13] = IR[13];
assign UType[12] = IR[12];
assign UType[11] = 1'b0;
assign UType[10] = 1'b0;
assign UType[9] = 1'b0;
assign UType[8] = 1'b0;
assign UType[7] = 1'b0;
assign UType[6] = 1'b0;
assign UType[5] = 1'b0;
assign UType[4] = 1'b0;
assign UType[3] = 1'b0;
assign UType[2] = 1'b0;
assign UType[1] = 1'b0;
assign UType[0] = 1'b0;

assign JType[31] = IR[31];
assign JType[30] = IR[31];
assign JType[29] = IR[31];
assign JType[28] = IR[31];
assign JType[27] = IR[31];
assign JType[26] = IR[31];
assign JType[25] = IR[31];
assign JType[24] = IR[31];
assign JType[23] = IR[31];
assign JType[22] = IR[31];
assign JType[21] = IR[31];
assign JType[20] = IR[31];
assign JType[19] = IR[19];
assign JType[18] = IR[18];
assign JType[17] = IR[17];
assign JType[16] = IR[16];
assign JType[15] = IR[15];
assign JType[14] = IR[14];
assign JType[13] = IR[13];
assign JType[12] = IR[12];
assign JType[11] = IR[20];
assign JType[10] = IR[30];
assign JType[9] = IR[29];
assign JType[8] = IR[28];
assign JType[7] = IR[27];
assign JType[6] = IR[26];
assign JType[5] = IR[25];
assign JType[4] = IR[24];
assign JType[3] = IR[23];
assign JType[2] = IR[22];
assign JType[1] = IR[21];
assign JType[0] = 1'b0;

assign firstselect[1] = IVBits[2];
assign firstselect[0] = IVBits[0];
or(secondselect, IVBits[2], IVBits[1]);
or(thirdselect, secondselect, IVBits[0]);

mux4_32bit(SType, BType, UType, JType, firstselect, firstintermediate);
mux2_32bit(IType, firstintermediate, secondselect, secondintermediate);
mux2_32bit(32'b00000000000000000000000000000000, secondintermediate, thirdselect, IV);

endmodule
